{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/zubba/OneDrive/projects/ai-pdf-note-taker/app/api/pdf-loader/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport fs from \"fs/promises\";\r\nimport { WebPDFLoader } from \"@langchain/community/document_loaders/web/pdf\";\r\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\r\n\r\n//const pdfUrl = \"https://polite-snail-646.convex.cloud/api/storage/8ce0caf4-fc31-4f4f-a575-b248d14845bd\"\r\n\r\nexport async function GET(req) {\r\n\r\n    const requestUrl = req.url;\r\n    const {searchParams} = new URL(requestUrl);\r\n    const pdfUrl= searchParams.get('pdfUrl');\r\n    console.log(pdfUrl);\r\n    \r\n\r\n    //1. Load the pdf File\r\n    const response = await fetch(pdfUrl);\r\n    const data = await response.blob();\r\n    const loader= new WebPDFLoader(data);\r\n    const docs = await loader.load();\r\n\r\n    let pdfTextContent='';\r\n    docs.forEach(doc=>{\r\n        pdfTextContent=pdfTextContent+doc.pageContent;\r\n    })\r\n\r\n\r\n    // 2. Split the text into smaller chunck\r\n    const splitter = new RecursiveCharacterTextSplitter({\r\n        chunkSize: 100,\r\n        chunkOverlap: 20,\r\n      });\r\n\r\n      const output = await splitter.createDocuments([pdfTextContent]);\r\n\r\n      let splitterList =[];\r\n      output.forEach(doc=>{\r\n        splitterList.push(doc.pageContent);\r\n      })\r\n      \r\n\r\n    return NextResponse.json({result:splitterList})\r\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;AAIO,eAAe,IAAI,GAAG;IAEzB,MAAM,aAAa,IAAI,GAAG;IAC1B,MAAM,EAAC,YAAY,EAAC,GAAG,IAAI,IAAI;IAC/B,MAAM,SAAQ,aAAa,GAAG,CAAC;IAC/B,QAAQ,GAAG,CAAC;IAGZ,sBAAsB;IACtB,MAAM,WAAW,MAAM,MAAM;IAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,MAAM,SAAQ,IAAI,oLAAA,CAAA,eAAY,CAAC;IAC/B,MAAM,OAAO,MAAM,OAAO,IAAI;IAE9B,IAAI,iBAAe;IACnB,KAAK,OAAO,CAAC,CAAA;QACT,iBAAe,iBAAe,IAAI,WAAW;IACjD;IAGA,wCAAwC;IACxC,MAAM,WAAW,IAAI,uKAAA,CAAA,iCAA8B,CAAC;QAChD,WAAW;QACX,cAAc;IAChB;IAEA,MAAM,SAAS,MAAM,SAAS,eAAe,CAAC;QAAC;KAAe;IAE9D,IAAI,eAAc,EAAE;IACpB,OAAO,OAAO,CAAC,CAAA;QACb,aAAa,IAAI,CAAC,IAAI,WAAW;IACnC;IAGF,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAC,QAAO;IAAY;AACjD","debugId":null}}]
}